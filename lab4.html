<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 4: Motors and Open Loop Control</title>
    <link rel="stylesheet" href="labpagestyles.css"> <!-- Link to external CSS file -->
</head>
  <nav>
        <ul>
            <li><a href="index.html">Home Page</a></li>
            <li><a href="lab1.html">Lab 1 Page</a></li>
            <li><a href="lab2.html">Lab 2 Page</a></li>
            <li><a href="lab3.html">Lab 3 Page</a></li>
            <li><a href="lab4.html">Lab 4 Page</a></li>
            <li><a href="lab5.html">Lab 5 Page</a></li>
        </ul>
  </nav>
<body>
    <h1>Lab 4: Motors and Open Loop Control</h1>

    <h2>Objective</h2>
    <p>The purpose of this lab is to replace the hardware of the RC car with our own hardware and be able to conduct open loop actions to start the transition to 
        automonous actions.</p>
    
    <h2>Prelab</h2>
    <h3>Connection Diagram</h3>
    <p>Diagram with intended connections between the motor drivers, Artemis, and battery (including specific pin numbers).</p>
    <img src="diagram.png" alt="Connection Diagram">
    <p>As can be seen in this diagram I decidced to make pins A0,A1,A2, and A5 the pins used for control. These pins are right next to a row of pins used for ground and 
    they are close enough to each other that wiring them up was easy. The only issue I faced for using these pins for control is that when using the IDE these pins
    lose the A prefix and are simply numbers. Ex: A0 -> 0,A1 -> 1,etc. I was not aware of this at first so when I was using the oscilloscope to monitor the PWM signals I was not receiving anything
    at first. </p>
    
    <h3>Battery Discussion</h3>
    <p>The reason the Artemis and motor drivers are powered from separate batteries is due to current and eletrical noise. The motors require a much higher amount of current
    to drive them that spliting the current between the 2 motor drivers and the Artemis would most likely cause a lower amount of current to be supplied to the motor drivers.
    In terms of electrical noise when the componenets are sharing the same power and ground eltrical noise can be induced espically for components like the motors which 
    are rapidly changing and has voltage and current spikes. </p>
    
    <h2>Lab Tasks</h2>
    
    <h3>Power Supply and Oscilloscope Setup</h3>
    <p>Picture of setup with power supply and oscilloscope hookup.</p>
    <img src="setup.png" alt="Power Supply Setup">
    
    <h3>Power Supply Settings</h3>
    <p>When deciding on the power supply setting I simply refernced the datasheet of the motor drivers. On page 5 under section 6.3 reconmenned operating conditions I saw
    that a minium of 2.7 volts were needed to allow the motors to turn. This led me to try this voltage first then increase or deacrese the voltage as needed. I was able to 
    immediately see that the datasheet was correct that roughly 2.7V was needed to allow the motors to move and anything lower than that does not allow the motors to move.
    But, you can hear noises from the encoders around 2.5V signaling that a lower volatge can be used to start something with the motor drivers but as stated before to 
    move the motors roughly 2.7V is needed.</p>
    
    <h3>AnalogWrite Code for Motor Testing</h3>
    <pre><code>
    // Example PWM control for motor driver
    int MotorPin1 = 0;//Controls right side
    int MotorPin2 = 1;// Controls right side
    void setup() {
         pinMode(MotorPin1,OUTPUT);
         pinMode(MotorPin2,OUTPUT);
    }
    void loop() {
        //This section was to move the right side
        analogWrite(MotorPin1, 0);
        analogWrite(MotorPin2, 200);
        delay(5000);
        analogWrite(MotorPin1, 0);
        analogWrite(MotorPin2, 0);
    }
    </code></pre>
    
    <h3>Oscilloscope Output</h3>
    <img src="oscilloscope.png" alt="Oscilloscope Output">
    
    <h3>Motor Testing</h3>
    <p>Short video of wheels spinning as expected.</p>
    <video controls>
        <source src="wheels_test.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <pre><code>
    // Code running during test
    analogWrite(motorPin, 150);
    </code></pre>
    
    <h3>Battery-Powered Motor Test</h3>
    <p>Short video of both wheels spinning with battery power.</p>
    <video controls>
        <source src="battery_test.mp4" type="video/mp4">
    </video>
    
    <h3>Final Assembly</h3>
    <p>Picture of all components secured in the car.</p>
    <img src="car_assembly.png" alt="Final Car Assembly">
    
    <h3>Lower Limit PWM Value</h3>
    <p>Discussion on the lowest PWM value required for movement.</p>
    
    <h3>Calibration Demonstration</h3>
    <p>Video demonstrating calibration and code adjustments.</p>
    <video controls>
        <source src="calibration.mp4" type="video/mp4">
    </video>
    <pre><code>
    // Example calibration factor implementation
    int leftMotorPWM = 150;
    int rightMotorPWM = 160; // Adjusted for balance
    </code></pre>
    
    <h3>Open Loop Control</h3>
    <p>Video demonstrating open loop movement.</p>
    <video controls>
        <source src="open_loop.mp4" type="video/mp4">
    </video>
    <pre><code>
    // Example open loop movement code
    void loop() {
        analogWrite(leftMotorPin, 150);
        analogWrite(rightMotorPin, 150);
        delay(2000);
        analogWrite(leftMotorPin, 0);
        analogWrite(rightMotorPin, 0);
    }
    </code></pre>
</body>
</html>

